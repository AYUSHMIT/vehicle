-- WARNING: This file was generated automatically by Vehicle
-- and should not be modified manually!
-- Metadata
--  - Agda version: 2.6.2
--  - AISEC version: 0.1.0.1
--  - Time generated: ???

{-# OPTIONS --allow-exec #-}

open import Vehicle
open import Vehicle.Data.Tensor
open import Data.Integer as ‚Ñ§ using (‚Ñ§)
open import Data.Rational as ‚Ñö using (‚Ñö)
open import Data.Bool as ùîπ using (Bool; true; false; if_then_else_)
open import Data.Fin as Fin using (#_)
open import Data.List
open import Relation.Nullary
open import Relation.Nullary.Decidable

module windController-output where

private
  VEHICLE_PROJECT_FILE = "TODO_projectFile"

InputVector : Set
InputVector = Tensor ‚Ñö (2 ‚à∑ [])

deltaV : InputVector ‚Üí ‚Ñö
deltaV = evaluate record
  { projectFile = VEHICLE_PROJECT_FILE
  ; networkUUID = "TODO_networkUUID"
  }

abs : ‚Ñö ‚Üí ‚Ñö
abs x = if ‚åä x ‚Ñö.<? ‚Ñ§.+ 0 ‚Ñö./ 1 ‚åã then ‚Ñö.- x else x

currentPosition : InputVector ‚Üí ‚Ñö
currentPosition x = x (# 0)

prevPosition : InputVector ‚Üí ‚Ñö
prevPosition x = x (# 1)

SafeInput : InputVector ‚Üí Set
SafeInput x = abs (currentPosition x) ‚Ñö.< ‚Ñ§.+ 3 ‚Ñö./ 1

SafeOutput : InputVector ‚Üí Set
SafeOutput x = abs ((deltaV x ‚Ñö.+ (‚Ñ§.+ 2 ‚Ñö./ 1) ‚Ñö.* currentPosition x) ‚Ñö.- prevPosition x) ‚Ñö.< ‚Ñ§.+ 2 ‚Ñö./ 1

abstract
  safe : ‚àÄ (x : Tensor ‚Ñö (2 ‚à∑ [])) ‚Üí SafeInput x ‚Üí SafeOutput x
  safe = checkProperty record
    { projectFile  = VEHICLE_PROJECT_FILE
    ; propertyUUID = "TODO_propertyUUID"
    }